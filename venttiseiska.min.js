/*!
 * @license
 * Venttiseiska v0.0.1
 * https://github.com/niklasramo/venttiseiska
 * Copyright (c) 2016 Niklas Rämö <inramo@gmail.com>
 * Released under the MIT license
 */
!function(t,e){var n="Venttiseiska";"function"==typeof define&&define.amd?define(n,[],e):"object"==typeof module&&module.exports?module.exports=e():t[n]=e()}(this,function(){"use strict";function t(){this._listeners={}}function e(t){return"string"==typeof t?t.split(c):t}function n(t,n){t=e(t);for(var i=0,r=t.length;r>i;i++){var s=t[i].split(u),o=s.shift();o&&n(o,s)}}function i(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function r(t,e,n){if(Array.prototype.indexOf)return t.indexOf(e,n||0);for(var i=n||0,r=t.length;r>i;i++)if(t[i]===e)return i;return-1}function s(t){for(var e=[],n=0,i=t.length;i>n;n++)-1===r(e,t[n])&&e.push(t[n]);return e}function o(t,e){for(var n=0,i=t.length;i>n;n++)if(-1===r(e,t[n]))return!1;return!0}function f(t,e){return t._id<e._id?-1:t._id>e._id?1:0}var h=0,c=" ",u=":",a=t.prototype;return a.on=function(i,r,s,o){var f=[];return i=e(i),n(i,function(e,n){f.push(new t.Listener(this,e,n,r,s,o))}),f},a.once=function(t,e,n){return this.on(t,e,n,1)},a.off=function(t,e){var i=this,r=i._listeners;if(t){var s="number"==typeof e,f="function"==typeof e;n(t,function(t,n){var i=r[t],h=n.length,c=i?i.length:0;if(c)if(e||h)for(;c--;){var u=i[c];h&&!o(n,u._tags)||!(!e||f&&e===u._fn||s&&e===u._id)||i.splice(c,1)}else i.length=0})}else for(var h in r)r.hasOwnProperty(h)&&(r[h].length=0)},a.emit=function(t,e,i){var r=this,s=r._listeners;n(t,function(t,n){var r=s[t],f=r&&r.length,h=n.length;if(f)for(var c=0;f>c;c++){var u=r[c];(!h||o(n,u._tags))&&u.emit(e,i)}})},a.getEvents=function(){var t=this._listeners,e=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&t[n].length>0&&e.push(n);return e},a.getListeners=function(t){var e=this._listeners,i=[],r=0;return t=t||this.getEvents(),n(t,function(t,n){++r;var s=e[t];if(s.length)if(n.length)for(var f=0;f<evListenersLength;f++){var h=s[f];o(n,h._tags)&&i.push(h)}else i=i.concat(e[t])}),r>1&&i.length>1?s(i).sort(f):i},t.Listener=function(t,e,n,i,r,s){var o=t._listeners;this._emitter=t,this._id=++h,this._event=e,this._tags=n,this._fn=i,this._context=r,this._cycles=s||0,(o[e]=o[e]||[]).push(this)},t.Listener.prototype.off=function(){this._emitter.off(this._event,this._id)},t.Listener.prototype.emit=function(t,e){var n=void 0!==e?e:void 0!==this._context?this._context:this._emitter,r=i(t)?t.concat():[];this._fn.apply(n,r),this._cycles&&0===--this._cycles&&this.off()},t.Listener.prototype.getData=function(){return{id:this._id,event:this._event,fn:this._fn,context:this._context,cycles:this._cycles}},t});